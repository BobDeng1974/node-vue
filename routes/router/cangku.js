const express=require('express')
const carRouter=express.Router()
const passpart = require('passport')

const data1=[
    {
        "waybill_id": "60020025c3076e31dbb2d9d5dd6de0b5",
        "truck_no": "川d052b",
        "line_id": "54525",
        "load_num": "0",
        "plan_starttime": "2019-05-10 02:19:07",
        "starttime": "2019-05-10 11:12:07",
        "plan_finishtime": "2019-05-12 09:04:07",
        "finishtime": "2019-05-12 19:04:07",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GNL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "武汉市",
        "to_addr_city": "驻马店市"
    }, {
        "waybill_id": "60020025c3076e31dbb2d9d5dd6de0b5",
        "truck_no": "川d052b",
        "line_id": "54525",
        "load_num": "0",
        "plan_starttime": "2019-05-10 02:19:07",
        "starttime": "2019-05-10 11:12:07",
        "plan_finishtime": "2019-05-12 09:04:07",
        "finishtime": "2019-05-12 19:04:07",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GNL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "武汉市",
        "to_addr_city": "驻马店市"
    }, {
        "waybill_id": "a27a2ed373b1866855a264b8b261cbac",
        "truck_no": "川b8651",
        "line_id": "10",
        "load_num": "0",
        "plan_starttime": "2019-05-08 02:12:32",
        "starttime": "2019-05-10 03:29:32",
        "plan_finishtime": "2019-05-12 22:29:32",
        "finishtime": "2019-05-12 23:54:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "武汉市",
        "to_addr_city": "保定市"
    }, {
        "waybill_id": "7ab7ef7893d5f8a04cbbce104b0c52c6",
        "truck_no": "川bd6ef",
        "line_id": "24999",
        "load_num": "0",
        "plan_starttime": "2019-05-10 19:21:32",
        "starttime": "2019-05-13 04:06:32",
        "plan_finishtime": "2019-05-11 19:19:32",
        "finishtime": "2019-05-12 12:23:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "武汉市",
        "to_addr_city": "保定市"
    }, {
        "waybill_id": "ba707c1594b3d034041fa155e3a4605f",
        "truck_no": "川25667",
        "line_id": "97810",
        "load_num": "0",
        "plan_starttime": "2019-05-10 08:10:32",
        "starttime": "2019-05-12 05:06:32",
        "plan_finishtime": "2019-05-12 22:40:32",
        "finishtime": "2019-05-13 03:55:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "江宁区",
        "to_addr_city": "南宁市"
    }, {
        "waybill_id": "ba707c1594b3d034041fa155e3a4605f",
        "truck_no": "川25667",
        "line_id": "97810",
        "load_num": "0",
        "plan_starttime": "2019-05-10 08:10:32",
        "starttime": "2019-05-12 05:06:32",
        "plan_finishtime": "2019-05-12 22:40:32",
        "finishtime": "2019-05-13 03:55:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "江宁区",
        "to_addr_city": "南宁市"
    }, {
        "waybill_id": "7ddc932e52f4f668b0d2a1b75aff07dd",
        "truck_no": "川385df",
        "line_id": "49882",
        "load_num": "0",
        "plan_starttime": "2019-05-12 00:41:32",
        "starttime": "2019-05-11 08:15:32",
        "plan_finishtime": "2019-05-12 23:20:32",
        "finishtime": "2019-05-13 01:24:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "荆门市",
        "to_addr_city": "武汉市"
    }, {
        "waybill_id": "e14c1e1009b3eef941fa274c09542574",
        "truck_no": "川6517b",
        "line_id": "49730",
        "load_num": "0",
        "plan_starttime": "2019-05-10 10:17:32",
        "starttime": "2019-05-11 22:26:32",
        "plan_finishtime": "2019-05-12 08:04:32",
        "finishtime": "2019-05-12 12:04:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "商丘市",
        "to_addr_city": "江宁区"
    }, {
        "waybill_id": "54309545d72dc6a77e054f61e31cdf29",
        "truck_no": "京AFR215",
        "line_id": "31587",
        "load_num": "0",
        "plan_starttime": "2019-05-06 17:14:32",
        "starttime": "2019-05-12 07:47:32",
        "plan_finishtime": "2019-6-14 13:32:32",
        "finishtime": "2019-6-15 20:07:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "江宁区",
        "to_addr_city": "桂林市"
    }, {
        "waybill_id": "bbf252fab965f8a1e07a14cd4bffe6d5",
        "truck_no": "川cab3b",
        "line_id": "84271",
        "load_num": "0",
        "plan_starttime": "2019-05-06 21:12:32",
        "starttime": "2019-05-12 09:14:32",
        "plan_finishtime": "2019-05-12 14:04:32",
        "finishtime": "2019-05-12 20:35:32",
        "way_step": "已交付",
        "overtime_info": "其他",
        "car_brand_name": null,
        "four_s_name": null,
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": null,
        "from_addr_city": "襄阳市",
        "to_addr_city": "武汉市"
    },
    {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH03",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQTOYOTA",
        "four_s_name": "",
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": "110.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH03",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "YQTOYOTA",
        "four_s_name": "",
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": "110.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH03",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "TOYOTA",
        "four_s_name": "",
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": "110.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH03",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "LEXUS",
        "four_s_name": "",
        "org_code": "GBL",
        "surplus_km": "0",
        "location_info": "110.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQCQ",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQFK",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQSL",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQTOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "YQTOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "TOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    },
    {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQSL",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQTOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "YQTOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "TOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "LEXUS",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQCQ",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQFK",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQSL",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "GQTOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }, {
        "waybill_id": "201906150030001",
        "truck_no": "川A4XH01",
        "line_id": "201906150040001",
        "load_num": "0",
        "plan_starttime": null,
        "starttime": null,
        "plan_finishtime": "2019-06-16",
        "finishtime": null,
        "way_step": "其他",
        "overtime_info": "其他",
        "car_brand_name": "YQTOYOTA",
        "four_s_name": "",
        "org_code": "GRTL",
        "surplus_km": "0",
        "location_info": "114.39730446614435,25.046416501030986",
        "from_addr_city": "广州市",
        "to_addr_city": "北京"
    }
]
//top整车
carRouter.get('/carWaybilMonitor/getTopInfo', passpart.authenticate('jwt', { session: false }),(req,res)=>{
    let obj={
        code: 0,
        finish_num: 0,
        msg: "success",
        online_num: 17,
        overtime_finish_num: 0,
        overtime_unfinish_num: 16,
        overtime_unsend_num: 12,
        plan_num: 0,
        send_num: 0,
        un_send_num: 0,
        }
       res.json({data:obj})
})

//整车表格
carRouter.post('/carWaybilMonitor/getCarWaybillInfo',passpart.authenticate('jwt', { session: false }),(req,res)=>{
 
if(req.body.to_addr_city || req.body.from_addr_city || req.body.overtime_info || req.body.truck_no || req.body.way_step || req.body.waybill_id){
   let tablefrom=data1.filter(item=>{
        return (item.to_addr_city==req.body.to_addr_city || item.from_addr_city==req.body.from_addr_city || item.overtime_info==req.body.overtime_info || item.truck_no==req.body.truck_no || item.waybill_id==req.body.waybill_id)
    })
  return res.json({code:1,msg:'success',data:tablefrom})
}
   res.json({code:1,msg:'success',data:data1})
})

module.exports=carRouter